{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "Avery-ADF"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/DS_CQC_locationresponses_file_Binary')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileType": {
						"type": "string"
					}
				},
				"folder": {
					"name": "CQC"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"folderPath": {
							"value": "@concat('locationresponses', '/', formatDateTime(utcNow(), 'yyyy'),'/',formatDateTime(utcNow(), 'MM'),'/',formatDateTime(utcNow(), 'dd'), '/', dataset().FileType)",
							"type": "Expression"
						},
						"container": "cqc"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_CQC_providerresponses_file_Binary')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileType": {
						"type": "string"
					}
				},
				"folder": {
					"name": "CQC"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"folderPath": {
							"value": "@concat('providerresponses', '/', formatDateTime(utcNow(), 'yyyy'),'/',formatDateTime(utcNow(), 'MM'),'/',formatDateTime(utcNow(), 'dd'), '/', dataset().FileType)",
							"type": "Expression"
						},
						"container": "cqc"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_CareBlox_Container')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Careblox"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"container": "careblox"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_CareBlox_Container_SubFolder')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FolderName": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Careblox"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"folderPath": {
							"value": "@dataset().FolderName",
							"type": "Expression"
						},
						"container": "careblox"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_CareBlox_FTP_Files')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "CareBlox_FTP",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Careblox/FTP"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "FtpServerLocation"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Fusion_Homes_json')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Fusion"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "Homes Export.json",
						"container": "fusion"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"ServiceUser_ID": {
							"type": "integer"
						},
						"Home_ID": {
							"type": "integer"
						},
						"room_ID": {
							"type": "integer"
						},
						"CC_HID": {
							"type": "integer"
						},
						"CC_ClientID": {
							"type": "integer"
						},
						"Title": {
							"type": "string"
						},
						"Forename": {
							"type": "string"
						},
						"Surname": {
							"type": "string"
						},
						"DateOfBirth": {
							"type": "string"
						},
						"DateIn": {
							"type": "string"
						},
						"DateOut": {
							"type": "string"
						},
						"careCategory": {
							"type": "string"
						},
						"fundingType": {
							"type": "integer"
						},
						"fees": {
							"type": "number"
						},
						"deleted": {
							"type": "string"
						},
						"sex": {
							"type": "string"
						},
						"maritalStatus": {
							"type": "string"
						},
						"nationality": {
							"type": "string"
						},
						"ni_num": {
							"type": "string"
						},
						"NHS": {
							"type": "string"
						},
						"nhs_Expiry": {
							"type": "string"
						},
						"nickname": {
							"type": "string"
						},
						"status": {
							"type": "string"
						},
						"residencyType": {
							"type": "string"
						},
						"dependency": {
							"type": "integer"
						},
						"alertCode": {
							"type": "integer"
						},
						"admittedFrom": {
							"type": "string"
						},
						"admittedFrom_Ad1": {
							"type": "string"
						},
						"admittedFrom_Ad2": {
							"type": "string"
						},
						"admittedFrom_Ad3": {
							"type": "string"
						},
						"admittedFrom_Ad4": {
							"type": "string"
						},
						"admittedFrom_PC": {
							"type": "string"
						},
						"admittedFrom_Tel": {
							"type": "string"
						},
						"admissionCode": {
							"type": "string"
						},
						"ResContractSigned": {
							"type": "string"
						},
						"finalFundingDate": {
							"type": "string"
						},
						"dischargeCode": {
							"type": "string"
						},
						"dischargeLocation": {
							"type": "string"
						},
						"dateOfDeath": {
							"type": "string"
						},
						"timeOfDeath": {
							"type": "string"
						},
						"doctorName": {
							"type": "string"
						},
						"deathCause": {
							"type": "string"
						},
						"ceaseInvoicing": {
							"type": "string"
						},
						"eye_colour": {
							"type": "string"
						},
						"height_cm": {
							"type": "integer"
						},
						"height_m": {
							"type": "number"
						},
						"hair_colour": {
							"type": "string"
						},
						"hair_length": {
							"type": "string"
						},
						"eye_wear": {
							"type": "string"
						},
						"hearing_aid": {
							"type": "string"
						},
						"facial_hair": {
							"type": "string"
						},
						"occupation": {
							"type": "string"
						},
						"allergies": {
							"type": "string"
						},
						"important_information": {
							"type": "string"
						},
						"deathNotes": {
							"type": "string"
						},
						"ClientNumber": {
							"type": "string"
						},
						"ClientID": {
							"type": "string"
						},
						"su_med_history": {
							"type": "string"
						},
						"su_med_likes": {
							"type": "string"
						},
						"su_med_social": {
							"type": "string"
						},
						"su_med_allergies": {
							"type": "string"
						},
						"su_DL_requirements": {
							"type": "string"
						},
						"su_evac_notes": {
							"type": "string"
						},
						"care_hours": {
							"type": "integer"
						},
						"DNAR": {
							"type": "string"
						},
						"respectTEP": {
							"type": "string"
						},
						"respectTEP_date": {
							"type": "string"
						},
						"DOLS": {
							"type": "string"
						},
						"DOLSDate": {
							"type": "string"
						},
						"DOLSExpiry": {
							"type": "string"
						},
						"DOLSRenewal": {
							"type": "string"
						},
						"DNARExpiry": {
							"type": "string"
						},
						"EndOfLife": {
							"type": "string"
						},
						"DPLNumber": {
							"type": "string"
						},
						"Religion": {
							"type": "string"
						},
						"su_funeral_wishes": {
							"type": "string"
						},
						"admissionreason_notes": {
							"type": "string"
						},
						"KeyCareWorker": {
							"type": "string"
						},
						"KeyNurseWorker": {
							"type": "string"
						},
						"financial_notes": {
							"type": "string"
						},
						"hospital_num": {
							"type": "string"
						},
						"target_weight": {
							"type": "number"
						},
						"target_fluid": {
							"type": "number"
						},
						"gdpr_consent_sent": {
							"type": "string"
						},
						"gdpr_consent_received": {
							"type": "string"
						},
						"su_lang": {
							"type": "string"
						},
						"susexuality": {
							"type": "string"
						},
						"UseBedRails": {
							"type": "string"
						},
						"expectedRate": {
							"type": "number"
						},
						"expectedFundingType": {
							"type": "integer"
						},
						"adrt": {
							"type": "string"
						},
						"FNCAppliedFor": {
							"type": "string"
						},
						"TermsAndConditions": {
							"type": "string"
						},
						"ProofOfFunding": {
							"type": "string"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Fusion_Json_File')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Filename": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Fusion"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().Filename",
							"type": "Expression"
						},
						"container": "fusion"
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Fusion_Resident')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Fusion"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "Resident Export.csv",
						"container": "fusion"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "ServiceUser_ID",
						"type": "String"
					},
					{
						"name": "Home_ID",
						"type": "String"
					},
					{
						"name": "room_ID",
						"type": "String"
					},
					{
						"name": "CC_HID",
						"type": "String"
					},
					{
						"name": "CC_ClientID",
						"type": "String"
					},
					{
						"name": "Title",
						"type": "String"
					},
					{
						"name": "Forename",
						"type": "String"
					},
					{
						"name": "Surname",
						"type": "String"
					},
					{
						"name": "DateOfBirth",
						"type": "String"
					},
					{
						"name": "DateIn",
						"type": "String"
					},
					{
						"name": "DateOut",
						"type": "String"
					},
					{
						"name": "careCategory",
						"type": "String"
					},
					{
						"name": "fundingType",
						"type": "String"
					},
					{
						"name": "fees",
						"type": "String"
					},
					{
						"name": "deleted",
						"type": "String"
					},
					{
						"name": "sex",
						"type": "String"
					},
					{
						"name": "maritalStatus",
						"type": "String"
					},
					{
						"name": "nationality",
						"type": "String"
					},
					{
						"name": "ni_num",
						"type": "String"
					},
					{
						"name": "NHS",
						"type": "String"
					},
					{
						"name": "nhs_Expiry",
						"type": "String"
					},
					{
						"name": "nickname",
						"type": "String"
					},
					{
						"name": "status",
						"type": "String"
					},
					{
						"name": "residencyType",
						"type": "String"
					},
					{
						"name": "dependency",
						"type": "String"
					},
					{
						"name": "alertCode",
						"type": "String"
					},
					{
						"name": "admittedFrom",
						"type": "String"
					},
					{
						"name": "admittedFrom_Ad1",
						"type": "String"
					},
					{
						"name": "admittedFrom_Ad2",
						"type": "String"
					},
					{
						"name": "admittedFrom_Ad3",
						"type": "String"
					},
					{
						"name": "admittedFrom_Ad4",
						"type": "String"
					},
					{
						"name": "admittedFrom_PC",
						"type": "String"
					},
					{
						"name": "admittedFrom_Tel",
						"type": "String"
					},
					{
						"name": "admissionCode",
						"type": "String"
					},
					{
						"name": "ResContractSigned",
						"type": "String"
					},
					{
						"name": "finalFundingDate",
						"type": "String"
					},
					{
						"name": "dischargeCode",
						"type": "String"
					},
					{
						"name": "dischargeLocation",
						"type": "String"
					},
					{
						"name": "dateOfDeath",
						"type": "String"
					},
					{
						"name": "timeOfDeath",
						"type": "String"
					},
					{
						"name": "doctorName",
						"type": "String"
					},
					{
						"name": "deathCause",
						"type": "String"
					},
					{
						"name": "ceaseInvoicing",
						"type": "String"
					},
					{
						"name": "eye_colour",
						"type": "String"
					},
					{
						"name": "height_cm",
						"type": "String"
					},
					{
						"name": "height_m",
						"type": "String"
					},
					{
						"name": "hair_colour",
						"type": "String"
					},
					{
						"name": "hair_length",
						"type": "String"
					},
					{
						"name": "eye_wear",
						"type": "String"
					},
					{
						"name": "hearing_aid",
						"type": "String"
					},
					{
						"name": "facial_hair",
						"type": "String"
					},
					{
						"name": "occupation",
						"type": "String"
					},
					{
						"name": "allergies",
						"type": "String"
					},
					{
						"name": "important_information",
						"type": "String"
					},
					{
						"name": "deathNotes",
						"type": "String"
					},
					{
						"name": "ClientNumber",
						"type": "String"
					},
					{
						"name": "ClientID",
						"type": "String"
					},
					{
						"name": "su_med_history",
						"type": "String"
					},
					{
						"name": "su_med_likes",
						"type": "String"
					},
					{
						"name": "su_med_social",
						"type": "String"
					},
					{
						"name": "su_med_allergies",
						"type": "String"
					},
					{
						"name": "su_DL_requirements",
						"type": "String"
					},
					{
						"name": "su_evac_notes",
						"type": "String"
					},
					{
						"name": "care_hours",
						"type": "String"
					},
					{
						"name": "DNAR",
						"type": "String"
					},
					{
						"name": "respectTEP",
						"type": "String"
					},
					{
						"name": "respectTEP_date",
						"type": "String"
					},
					{
						"name": "DOLS",
						"type": "String"
					},
					{
						"name": "DOLSDate",
						"type": "String"
					},
					{
						"name": "DOLSExpiry",
						"type": "String"
					},
					{
						"name": "DOLSRenewal",
						"type": "String"
					},
					{
						"name": "DNARExpiry",
						"type": "String"
					},
					{
						"name": "EndOfLife",
						"type": "String"
					},
					{
						"name": "DPLNumber",
						"type": "String"
					},
					{
						"name": "Religion",
						"type": "String"
					},
					{
						"name": "su_funeral_wishes",
						"type": "String"
					},
					{
						"name": "admissionreason_notes",
						"type": "String"
					},
					{
						"name": "KeyCareWorker",
						"type": "String"
					},
					{
						"name": "KeyNurseWorker",
						"type": "String"
					},
					{
						"name": "financial_notes",
						"type": "String"
					},
					{
						"name": "hospital_num",
						"type": "String"
					},
					{
						"name": "target_weight",
						"type": "String"
					},
					{
						"name": "target_fluid",
						"type": "String"
					},
					{
						"name": "gdpr_consent_sent",
						"type": "String"
					},
					{
						"name": "gdpr_consent_received",
						"type": "String"
					},
					{
						"name": "su_lang",
						"type": "String"
					},
					{
						"name": "susexuality",
						"type": "String"
					},
					{
						"name": "UseBedRails",
						"type": "String"
					},
					{
						"name": "expectedRate",
						"type": "String"
					},
					{
						"name": "expectedFundingType",
						"type": "String"
					},
					{
						"name": "adrt",
						"type": "String"
					},
					{
						"name": "FNCAppliedFor",
						"type": "String"
					},
					{
						"name": "TermsAndConditions",
						"type": "String"
					},
					{
						"name": "ProofOfFunding",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Fusion_Resident_json')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Fusion"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "Resident Export.json",
						"container": "fusion"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"ServiceUser_ID": {
							"type": "integer"
						},
						"Home_ID": {
							"type": "integer"
						},
						"room_ID": {
							"type": "integer"
						},
						"CC_HID": {
							"type": "integer"
						},
						"CC_ClientID": {
							"type": "integer"
						},
						"Title": {
							"type": "string"
						},
						"Forename": {
							"type": "string"
						},
						"Surname": {
							"type": "string"
						},
						"DateOfBirth": {
							"type": "string"
						},
						"DateIn": {
							"type": "string"
						},
						"DateOut": {
							"type": "string"
						},
						"careCategory": {
							"type": "string"
						},
						"fundingType": {
							"type": "integer"
						},
						"fees": {
							"type": "number"
						},
						"deleted": {
							"type": "string"
						},
						"sex": {
							"type": "string"
						},
						"maritalStatus": {
							"type": "string"
						},
						"nationality": {
							"type": "string"
						},
						"ni_num": {
							"type": "string"
						},
						"NHS": {
							"type": "string"
						},
						"nhs_Expiry": {
							"type": "string"
						},
						"nickname": {
							"type": "string"
						},
						"status": {
							"type": "string"
						},
						"residencyType": {
							"type": "string"
						},
						"dependency": {
							"type": "integer"
						},
						"alertCode": {
							"type": "integer"
						},
						"admittedFrom": {
							"type": "string"
						},
						"admittedFrom_Ad1": {
							"type": "string"
						},
						"admittedFrom_Ad2": {
							"type": "string"
						},
						"admittedFrom_Ad3": {
							"type": "string"
						},
						"admittedFrom_Ad4": {
							"type": "string"
						},
						"admittedFrom_PC": {
							"type": "string"
						},
						"admittedFrom_Tel": {
							"type": "string"
						},
						"admissionCode": {
							"type": "string"
						},
						"ResContractSigned": {
							"type": "string"
						},
						"finalFundingDate": {
							"type": "string"
						},
						"dischargeCode": {
							"type": "string"
						},
						"dischargeLocation": {
							"type": "string"
						},
						"dateOfDeath": {
							"type": "string"
						},
						"timeOfDeath": {
							"type": "string"
						},
						"doctorName": {
							"type": "string"
						},
						"deathCause": {
							"type": "string"
						},
						"ceaseInvoicing": {
							"type": "string"
						},
						"eye_colour": {
							"type": "string"
						},
						"height_cm": {
							"type": "integer"
						},
						"height_m": {
							"type": "number"
						},
						"hair_colour": {
							"type": "string"
						},
						"hair_length": {
							"type": "string"
						},
						"eye_wear": {
							"type": "string"
						},
						"hearing_aid": {
							"type": "string"
						},
						"facial_hair": {
							"type": "string"
						},
						"occupation": {
							"type": "string"
						},
						"allergies": {
							"type": "string"
						},
						"important_information": {
							"type": "string"
						},
						"deathNotes": {
							"type": "string"
						},
						"ClientNumber": {
							"type": "string"
						},
						"ClientID": {
							"type": "string"
						},
						"su_med_history": {
							"type": "string"
						},
						"su_med_likes": {
							"type": "string"
						},
						"su_med_social": {
							"type": "string"
						},
						"su_med_allergies": {
							"type": "string"
						},
						"su_DL_requirements": {
							"type": "string"
						},
						"su_evac_notes": {
							"type": "string"
						},
						"care_hours": {
							"type": "integer"
						},
						"DNAR": {
							"type": "string"
						},
						"respectTEP": {
							"type": "string"
						},
						"respectTEP_date": {
							"type": "string"
						},
						"DOLS": {
							"type": "string"
						},
						"DOLSDate": {
							"type": "string"
						},
						"DOLSExpiry": {
							"type": "string"
						},
						"DOLSRenewal": {
							"type": "string"
						},
						"DNARExpiry": {
							"type": "string"
						},
						"EndOfLife": {
							"type": "string"
						},
						"DPLNumber": {
							"type": "string"
						},
						"Religion": {
							"type": "string"
						},
						"su_funeral_wishes": {
							"type": "string"
						},
						"admissionreason_notes": {
							"type": "string"
						},
						"KeyCareWorker": {
							"type": "string"
						},
						"KeyNurseWorker": {
							"type": "string"
						},
						"financial_notes": {
							"type": "string"
						},
						"hospital_num": {
							"type": "string"
						},
						"target_weight": {
							"type": "number"
						},
						"target_fluid": {
							"type": "number"
						},
						"gdpr_consent_sent": {
							"type": "string"
						},
						"gdpr_consent_received": {
							"type": "string"
						},
						"su_lang": {
							"type": "string"
						},
						"susexuality": {
							"type": "string"
						},
						"UseBedRails": {
							"type": "string"
						},
						"expectedRate": {
							"type": "number"
						},
						"expectedFundingType": {
							"type": "integer"
						},
						"adrt": {
							"type": "string"
						},
						"FNCAppliedFor": {
							"type": "string"
						},
						"TermsAndConditions": {
							"type": "string"
						},
						"ProofOfFunding": {
							"type": "string"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_Hydra_RadarFile')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "XMl file for Radar system. Combined values from fusion and Radar into a single file for Radar.",
				"linkedServiceName": {
					"referenceName": "Hydra_FTP",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Radar"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "FtpServerLocation",
						"fileName": "radar-output.xml"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_MCM_Communities')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "MCM API",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"APIKey": {
						"type": "string"
					},
					"Query": {
						"type": "string"
					}
				},
				"folder": {
					"name": "MCM"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {
					"relativeUrl": {
						"value": "@concat(dataset().APIKey, '/', dataset().Query)",
						"type": "Expression"
					}
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_MCM_Get_Generic')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Dataset used to Get data from MCM API. Query (endpoint/report) is required as is a communityID",
				"linkedServiceName": {
					"referenceName": "MCM API",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"APIKey": {
						"type": "string"
					},
					"Query": {
						"type": "string"
					},
					"CommunityID": {
						"type": "string"
					}
				},
				"folder": {
					"name": "MCM"
				},
				"annotations": [],
				"type": "RestResource",
				"typeProperties": {
					"relativeUrl": {
						"value": "@concat(dataset().APIKey, '/', dataset().Query, '?communityID=', dataset().CommunityID)\n\n",
						"type": "Expression"
					}
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_MCM_Json')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"FileName": {
						"type": "string"
					}
				},
				"folder": {
					"name": "MCM"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@concat(dataset().FileName, '.json')",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@concat( formatDateTime(utcNow(), 'yyyy'),'/',formatDateTime(utcNow(), 'MM'),'/',formatDateTime(utcNow(), 'dd'))",
							"type": "Expression"
						},
						"container": "mcm"
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestaStorageAcc_Fileshare_Json')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageFileshare",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "FileShare"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureFileStorageLocation"
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_AEMS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Folder": {
						"type": "string"
					},
					"FileName": {
						"type": "string"
					}
				},
				"folder": {
					"name": "AEMS"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@dataset().FileName",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@dataset().Folder",
							"type": "Expression"
						},
						"container": "aems"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_Excel')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Other"
				},
				"annotations": [],
				"type": "Excel",
				"typeProperties": {
					"sheetName": "Sheet1",
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "Periods.xlsx",
						"container": "budget"
					},
					"firstRowAsHeader": true
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_Exchequer')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Exchequer"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"folderPath": {
							"value": "@formatDateTime(utcNow(), 'yyyy-MM-dd')",
							"type": "Expression"
						},
						"container": "exchequer"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_Exchequer_CSV')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Exchequer Company access report, CSV file stored in Storage account",
				"linkedServiceName": {
					"referenceName": "PolestarStorageAcc",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Exchequer"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": {
							"value": "@concat('Exchequer$User$CompanyAccess$', utcNow('dd-MM-yyyy'),'.csv')",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@formatDateTime(utcNow(), 'yyyy-MM-dd')",
							"type": "Expression"
						},
						"container": "exchequer"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "CompanyCode",
						"type": "String"
					},
					{
						"name": "CompanyName",
						"type": "String"
					},
					{
						"name": "UserID",
						"type": "String"
					},
					{
						"name": "UserName",
						"type": "String"
					},
					{
						"name": "ReportDate",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_Fileshare')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageFileshare",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "FileShare"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureFileStorageLocation"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_PolestarStorageAcc_Fileshare_CSV')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "PolestarStorageFileshare",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"Filename": {
						"type": "string"
					}
				},
				"folder": {
					"name": "FileShare"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureFileStorageLocation",
						"fileName": {
							"value": "@dataset().Filename",
							"type": "Expression"
						}
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": []
		}
	]
}